async function mainFunc() {
  // Google search keywords: javascript await foreach
  // Reference link: https://stackoverflow.com/questions/51738684/await-with-array-foreach-containing-async-await
  await Promise.all(
    houseIdList.map((elm) => {
      createDom(elm);
    }),
  );
}
mainFunc();

// Google search keywords: get json with async
// Reference link: https://dmitripavlutin.com/javascript-fetch-async-await/
async function fetchData(url) {
  if (url != '') {
    const response = await fetch(url);
    const data = await response.json();
    return data;
  }
}

async function createDom(houseId) {
  // Google search keywords: javascript create dom
  // Reference link: https://www.javascripttutorial.net/dom/manipulating/create-a-dom-element/
  const houseDiv = document.createElement('div');
  houseDiv.classList.add('got-house');
  const houseTitleH1 = document.createElement('h1');
  houseTitleH1.classList.add('got-house__title');
  let currentLord = '';
  const houseNameStr = await fetchData(
    'https://anapioficeandfire.com/api/houses/' + houseId,
  ).then((data) => {
    data;
    houseTitleH1.innerHTML = data.name;
    currentLord = data.currentLord;
  });
  houseDiv.appendChild(houseTitleH1);
  const lordNameSpan = document.createElement('span');
  lordNameSpan.classList.add('got-house__current-lord');
  lordNameSpan.id = 'lordOf_' + houseId;
  const lordNameStr = await fetchData(currentLord).then((data) => {
    data;
    if (data !== undefined) {
      lordNameSpan.innerHTML = data.name;
    } else {
      lordNameSpan.innerHTML = 'With out Lord Name';
    }
  });

  houseDiv.appendChild(lordNameSpan);
  document.getElementById('got-house-list').appendChild(houseDiv);
}

document.getElementById('kill-random-lord-button').onclick = async () => {
  const rndHouseId =
    houseIdList[Math.floor(Math.random() * houseIdList.length)];
  let swornMembersArr = [];
  const houseNameStr = await fetchData(
    'https://anapioficeandfire.com/api/houses/' + rndHouseId,
  ).then((data) => {
    data;
    swornMembersArr = data.swornMembers;
  });
  const rndSwornMember =
    swornMembersArr[Math.floor(Math.random() * swornMembersArr.length)];
  console.log(rndSwornMember);
  const swornMemberStr = await fetchData(rndSwornMember).then((data) => {
    data;
    document.getElementById('lordOf_' + rndHouseId).innerHTML = data.name;
  });
};
// some good references:
// Google search keywords: JavaScript get json
// Reference link: https://stackoverflow.com/questions/12460378/how-to-get-json-from-url-in-javascript
